//@version=5
indicator("Tier 2 Daily Pattern", overlay=true)

// Define EMAs
ema10 = ta.ema(close, 10)
ema20 = ta.ema(close, 20)
ema200 = ta.ema(close, 200)

// Conditions for the Tier 2 Pattern
bullish_condition = close > open and (close > ema10 or close > ema20)
bearish_condition = close < open and (close < ema10 or close < ema20)

// EMA 10 > EMA 20 > EMA 200
ema_condition = ema10 > ema20 and ema20 > ema200

// Permission logic
permission = na
if (ema_condition)
    if (bullish_condition and close > ema10)
        permission := true
    if (bearish_condition and close > ema10 and close[1] > ema10)
        permission := true

// Restriction logic
restriction = na
if (close < ema20)
    restriction := true

// Debugging Label
label_permission = na
if (permission)
    label_permission := label.new(bar_index, high, "T2", style=label.style_label_up, color=color.green, textcolor=color.white, size=size.small)

// Reset permission if restricted
if (restriction)
    permission := na

// Plot EMAs
plot(ema10, color=color.blue, linewidth=2, title="EMA 10")
plot(ema20, color=color.red, linewidth=2, title="EMA 20")
plot(ema200, color=color.orange, linewidth=2, title="EMA 200")

// Display labels if permission is met
if (permission)
    label_permission
